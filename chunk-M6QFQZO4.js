import{a as me,b as le,c as pe}from"./chunk-N47JYXVN.js";import{a as oe,c as S,d as re,e as y,g as j,h as Y,j as M,k as ae,l as z,n as R,o as se,p as V,q as ce}from"./chunk-NOSRQ6PS.js";import"./chunk-ZY7TBVF4.js";import{a as L,d as de}from"./chunk-VTNCUX6Z.js";import{a as ne,c as k,d as D}from"./chunk-CKIHC3UM.js";import{$ as u,C as $,D as T,F as q,Fa as o,Ga as K,Ha as C,I as c,J as I,Ka as b,Ma as N,N as U,O as Q,V as J,Xa as O,Za as P,_ as l,ba as A,d as _,db as W,ea as v,ga as p,hb as X,ka as E,oa as n,pa as t,qa as m,tb as Z,ua as B,ub as ee,wa as h,wb as te,xa as g,xb as ie,yb as H}from"./chunk-ZGL6Y7DQ.js";var ue=(()=>{let e=class e{constructor(a){this.users=a,this.Path=D}ngOnInit(){this.users.currentUser.subscribe(a=>{a&&(this.user=a)})}onOutletLoaded(a){a.user=this.user}};e.\u0275fac=function(r){return new(r||e)(u(L))},e.\u0275cmp=c({type:e,selectors:[["app-settings"]],decls:21,vars:3,consts:[[1,"gap-0","grid","grid-cols-4","w-full"],[1,"col-span-1","flex","flex-col","w-full","p-4","bg-white","h-screen","shadow"],[1,"text-3xl","font-bold","my-4","ms-3"],[1,"border-gray-200","mb-6"],[1,"menu","space-y-4","text-lg"],[1,"mb-2"],["routerLinkActive","border-l-4",1,"border-primary","rounded-none",3,"routerLink"],[1,"bi","bi-person-fill","me-2"],[1,"bi","bi-lock-fill","me-2"],[1,"bi","bi-bell-fill","me-2"],[1,"col-span-3","flex","flex-col"],[1,"w-4/5","p-8","mx-auto"],[3,"activate"]],template:function(r,s){r&1&&(n(0,"div",0)(1,"div",1)(2,"h1",2),o(3,"Pr\xE9ferences"),t(),m(4,"hr",3),n(5,"ul",4)(6,"li",5)(7,"a",6),m(8,"i",7),o(9,"Pr\xE9f\xE9rences du compte"),t()(),n(10,"li",5)(11,"a",6),m(12,"i",8),o(13,"Authentification et S\xE9curit\xE9"),t()(),n(14,"li",5)(15,"a",6),m(16,"i",9),o(17,"Notifications"),t()()()(),n(18,"div",10)(19,"div",11)(20,"router-outlet",12),h("activate",function(w){return s.onOutletLoaded(w)}),t()()()()),r&2&&(l(7),p("routerLink",s.Path.PREFERENCES_ACCOUNT.toString()),l(4),p("routerLink",s.Path.PREFERENCES_SECURITY.toString()),l(4),p("routerLink",s.Path.PREFERENCES_NOTIFICATIONS.toString()))},dependencies:[ee,te,ie]});let i=e;return i})();var he=(()=>{let e=class e{constructor(a){this.fb=a,this.accountForm=this.fb.group({})}submitUserModification(){console.log(this.accountForm.value)}};e.\u0275fac=function(r){return new(r||e)(u(R))},e.\u0275cmp=c({type:e,selectors:[["app-account-infos-modal"]],decls:6,vars:1,consts:[["id","userInfoModal",1,"modal"],["autocomplete","off",1,"modal-box","w-11/12","max-w-5xl",3,"formGroup","ngSubmit"],[1,"modal-action"],["method","dialog"],[1,"btn"]],template:function(r,s){r&1&&(n(0,"dialog",0)(1,"form",1),h("ngSubmit",function(){return s.submitUserModification()}),n(2,"div",2)(3,"form",3)(4,"button",4),o(5,"Close"),t()()()()()),r&2&&(l(),p("formGroup",s.accountForm))},dependencies:[M,y,j,z]});let i=e;return i})();var xe=(()=>{let e=class e{constructor(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=c({type:e,selectors:[["app-account-settings"]],decls:49,vars:0,consts:[[1,"bg-white","rounded-lg","shadow","p-6"],[1,"text-xl","font-bold","mb-4"],["onclick","userInfoModal.showModal()"],[1,"flex","justify-between","items-center","mb-2"],[1,"bi","bi-chevron-right"],[1,"my-6"],[1,"text-xl","font-bold","mt-6","mb-4"],[1,"flex","items-center"],[1,"mr-2","text-sm","text-gray-500"]],template:function(r,s){r&1&&(n(0,"div",0)(1,"h2",1),o(2,"Informations de profil"),t(),n(3,"ul")(4,"a",2)(5,"li",3)(6,"span"),o(7,"Nom, lieu et secteur"),t(),m(8,"i",4),t()()(),m(9,"hr",5),n(10,"h2",6),o(11,"Pr\xE9f\xE9rences g\xE9n\xE9rales"),t(),n(12,"ul")(13,"a")(14,"li",3)(15,"span"),o(16,"Effets sonores"),t(),n(17,"div",7)(18,"span",8),o(19,"Activ\xE9"),t(),m(20,"i",4),t()()(),n(21,"a")(22,"li",3)(23,"span"),o(24,"Affichage des photos de profil"),t(),n(25,"div",7)(26,"span",8),o(27,"Tous les membres de LinkedIn"),t(),m(28,"i",4),t()()(),n(29,"a")(30,"li",3)(31,"span"),o(32,"Pr\xE9f\xE9rences du fil d'actualit\xE9"),t(),m(33,"i",4),t()(),n(34,"a")(35,"li",3)(36,"span"),o(37,"Personnes que vous ne suivez plus"),t(),m(38,"i",4),t()()(),m(39,"hr",5),n(40,"h2",6),o(41,"Gestion du compte"),t(),n(42,"ul")(43,"a")(44,"li",3)(45,"span"),o(46,"Fermer le compte"),t(),m(47,"i",4),t()()()(),m(48,"app-account-infos-modal"))},dependencies:[he],styles:["a[_ngcontent-%COMP%]{cursor:pointer}"]});let i=e;return i})();var F=(()=>{let e=class e{constructor(a,r){this.http=a,this.users=r}requestMfa(){return new Promise((a,r)=>{this.http.get(this.users.api+"/request-mfa").subscribe({next:s=>a(s),error:s=>r(s)})})}mfa(a,r){return new Promise((s,f)=>{this.http.post(this.users.api+"/mfa/"+a,r).subscribe({next:w=>s(w),error:w=>f(w)})})}};e.\u0275fac=function(r){return new(r||e)(q(X),q(L))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let i=e;return i})();function Ie(i,e){i&1&&(n(0,"div",4),m(1,"i",5),n(2,"p",6),o(3,"Pour activer la v\xE9rification en deux \xE9tapes, vous aurez besoin d'une application d'authentification sur votre t\xE9l\xE9phone. Une fois activ\xE9e, vous devrez entrer un code de v\xE9rification \xE0 chaque connexion. "),t()())}function Ae(i,e){i&1&&(n(0,"div",4),m(1,"i",5),n(2,"p",6),o(3,"Pour d\xE9sactiver la v\xE9rification en deux \xE9tapes, vous devrez confirmer votre identit\xE9 en entrant un code de v\xE9rification et votre mot de passe. "),t()())}function Ne(i,e){if(i&1&&(n(0,"p",7),o(1),t()),i&2){let d=g();l(),C("Vous pouvez r\xE9essayer dans ",d.timeLeft," secondes.")}}var ge=(()=>{let e=class e{constructor(a,r){this.settings=a,this.utils=r,this.completed=new A,this.isTimerActive=!1,this.timeLeft=60}requestMfa(){return _(this,null,function*(){this.isTimerActive=!0,this.startTimer(),yield this.settings.requestMfa().then(()=>this.completed.emit()).catch(a=>this.utils.alert(a.error.error,ne.ERROR))})}startTimer(){let a=setInterval(()=>{this.timeLeft--,this.timeLeft<=0&&(clearInterval(a),this.isTimerActive=!1,this.timeLeft=60)},1e3)}};e.\u0275fac=function(r){return new(r||e)(u(F),u(k))},e.\u0275cmp=c({type:e,selectors:[["app-step-one"]],inputs:{usingMFA:"usingMFA"},outputs:{completed:"completed"},standalone:!0,features:[b],decls:6,vars:4,consts:[["class","flex flex-row items-center my-2"],[1,"text-center"],[1,"btn","btn-primary","text-lg","mx-auto",3,"disabled","click"],["class","text-center text-gray-500 mt-4",4,"ngIf"],[1,"flex","flex-row","items-center","my-2"],[1,"bi","bi-shield-check","text-4xl","text-primary"],[1,"p-4"],[1,"text-center","text-gray-500","mt-4"]],template:function(r,s){r&1&&(v(0,Ie,4,0,"div",0)(1,Ae,4,0),n(2,"div",1)(3,"button",2),h("click",function(){return s.requestMfa()}),o(4),t()(),v(5,Ne,2,1,"p",3)),r&2&&(E(0,s.usingMFA?1:0),l(3),p("disabled",s.isTimerActive),l(),C(" ",s.isTimerActive?"Veuillez patienter...":"Continuer"," "),l(),p("ngIf",s.isTimerActive))},dependencies:[P],encapsulation:2});let i=e;return i})();function Pe(i,e){i&1&&(n(0,"p",11),o(1,"Le mot de passe est requis"),t())}var G=(()=>{let e=class e{constructor(a,r,s,f){this.settings=r,this.forms=s,this.utils=f,this.completed=new A,this.codeCtrl=new Y("",[S.required,S.minLength(6),S.maxLength(6),S.pattern("^[0-9]*$")]),this.passwordCtrl=new Y("",[S.required,S.minLength(8)]),this.OTP_CONFIG=pe,this.mfaForm=a.group({code:this.codeCtrl,password:this.passwordCtrl})}submitMfaAction(){return _(this,null,function*(){let a=this.usingMfa?"disable":"enable";this.forms.checkFormValidity(this.mfaForm)&&(yield this.settings.mfa(a,this.mfaForm.value).then(r=>a==="enable"?this.completed.emit(r.qr_image):this.completed.emit(null)).catch(r=>this.utils.alert(r.error.error)),this.mfaForm.reset())})}};e.\u0275fac=function(r){return new(r||e)(u(R),u(F),u(ce),u(k))},e.\u0275cmp=c({type:e,selectors:[["app-step-two"]],inputs:{usingMfa:"usingMfa"},outputs:{completed:"completed"},standalone:!0,features:[b],decls:20,vars:7,consts:[["autocomplete","off",3,"formGroup","ngSubmit"],[1,"text-lg","font-semibold","text-gray-800"],[1,"mt-4"],[1,"block","text-sm","mb-2","font-medium","text-gray-700"],[1,"my-4","text-center"],[3,"formCtrl","config"],["type","password","placeholder","Mot de passe LinkedOut",1,"input","input-bordered","w-full",3,"formControl","ngClass"],["class","text-red-500 text-sm mt-1",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"mt-4","text-center","font-bold","text-sm","text-gray-600"],[1,"mt-4","text-center","text-sm","text-gray-600"],[1,"text-red-500","text-sm","mt-1"]],template:function(r,s){r&1&&(n(0,"form",0),h("ngSubmit",function(){return s.submitMfaAction()}),n(1,"h3",1),o(2,"Nous avons envoy\xE9 un code de v\xE9rification \xE0 votre adresse e-mail"),t(),n(3,"div",2)(4,"label",3),o(5,"Saisissez le code de verification \xE0 6 chiffres envoy\xE9:"),t(),n(6,"div",4),m(7,"ng-otp-input",5),t()(),n(8,"div",2)(9,"label",3),o(10,"Saissisez votre mot de passe LinkedOut pour effectuer cette opertation:"),t(),m(11,"input",6),v(12,Pe,2,0,"p",7),t(),n(13,"div",4)(14,"button",8),o(15,"Valider"),t()(),n(16,"p",9),o(17,"Si vous n'avez pas re\xE7u le code, verifiez dans les courriers ind\xE9sirables de votre messagerie."),t(),n(18,"p",10),o(19,"Toujours pas re\xE7u le code ? Fermez cette fen\xEAtre et r\xE9essayez."),t()()),r&2&&(p("formGroup",s.mfaForm),l(7),p("formCtrl",s.codeCtrl)("config",s.OTP_CONFIG),l(4),p("formControl",s.passwordCtrl)("ngClass",(s.passwordCtrl.touched||s.passwordCtrl.dirty)&&s.passwordCtrl.invalid?"input-error":"input-primary"),l(),p("ngIf",s.mfaForm.get("password").invalid&&s.mfaForm.get("password").touched),l(2),p("disabled",!s.mfaForm.valid))},dependencies:[V,M,oe,re,y,ae,z,le,me,P,O],encapsulation:2});let i=e;return i})();function De(i,e){if(i&1&&(n(0,"h3",0),o(1,"Configurer une application d'authentification"),t(),n(2,"div",1)(3,"ul",2)(4,"li",3),o(5,"T\xE9l\xE9chargez une application d'authentification. Nous recommandons "),n(6,"a",4),o(7,"Google Authenticator pour Android"),t(),o(8," ou "),n(9,"a",5),o(10,"Google Authenticator pour iOS"),t(),o(11,". "),t(),n(12,"li",3),o(13,`Ouvrez l'application et appuyez sur l'ic\xF4ne "`),n(14,"strong",6),o(15,"+"),t(),o(16,'"'),t(),n(17,"li",3),o(18,"Scannez le code QR affich\xE9 ci-dessous."),t()(),n(19,"div",7),m(20,"img",8),t()(),n(21,"p",9),m(22,"i",10),n(23,"span",11),o(24,"Ce code QR est visible une seule fois. Assurez-vous de le scanner avant de continuer."),t()()),i&2){let d=g();l(20),p("src",d.QrImage,J)}}function Le(i,e){i&1&&(n(0,"h3",12),m(1,"i",13),n(2,"p",14),o(3,"La v\xE9rification en deux \xE9tapes est desormais desactiv\xE9e pour votre compte LinkedOut."),t()())}var Ee=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=c({type:e,selectors:[["app-step-three"]],inputs:{QrImage:"QrImage",usingMfa:"usingMfa"},standalone:!0,features:[b],decls:2,vars:1,consts:[[1,"text-lg","font-semibold","text-gray-800","mb-2"],[1,"flex","items-start","space-x-4"],[1,"list-decimal","pl-5","space-y-4","flex-1"],[1,"text-gray-700"],["href","https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&pcampaignid=web_share","target","_blank",1,"text-primary","font-bold"],["href","https://apps.apple.com/us/app/google-authenticator/id388497605","target","_blank",1,"text-primary","font-bold"],[1,"text-lg"],[1,"my-4","text-center"],["alt","QR Code",1,"w-60","h-60",3,"src"],[1,"text-warning","text-center","font-bold","text-lg","border","border-warning","rounded-lg","p-2"],[1,"bi","bi-exclamation-triangle","text-warning"],[1,"ms-4"],[1,"text-center","my-auto"],[1,"bi","bi-shield-check","text-4xl","text-primary"],[1,"py-4"]],template:function(r,s){r&1&&v(0,De,25,1)(1,Le,4,0),r&2&&E(0,s.usingMfa?1:0)},encapsulation:2});let i=e;return i})();function ze(i,e){i&1&&(n(0,"h3",10),o(1,"Activation de la v\xE9rification en deux \xE9tapes"),t())}function Re(i,e){i&1&&(n(0,"h3",10),o(1,"D\xE9sactivation de la v\xE9rification en deux \xE9tapes"),t())}function Ve(i,e){if(i&1){let d=B();n(0,"app-step-one",11),h("completed",function(){U(d);let r=g();return Q(r.nextStep())}),t()}if(i&2){let d=g();p("usingMFA",d.usingMfa)}}function Ge(i,e){if(i&1){let d=B();n(0,"app-step-two",12),h("completed",function(r){U(d);let s=g();return Q(s.nextStep(r))}),t()}if(i&2){let d=g();p("usingMfa",d.usingMfa)}}function qe(i,e){if(i&1&&m(0,"app-step-three",13),i&2){let d=g();p("usingMfa",d.usingMfa)("QrImage",d.qrCode)}}var Ce=i=>({"step-primary":i}),Ue=i=>({"btn-primary":i}),Se=(()=>{let e=class e{constructor(){this.step=1,this.location=location}nextStep(a){a&&(this.qrCode=a),this.step++}finalizeMFA(){this.step===3&&this.location.reload()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=c({type:e,selectors:[["app-mfa-modal"]],inputs:{usingMfa:"usingMfa"},decls:19,vars:12,consts:[["id","mfaModal",1,"modal"],[1,"modal-box","w-11/12","max-w-5xl"],["class","text-lg font-bold my-2"],[1,"mx-auto","text-center","my-4"],[1,"steps","steps-horizontal"],[1,"step","step-primary"],[1,"step",3,"ngClass"],[1,"modal-action"],["method","dialog",1,"text-center","w-full"],[1,"btn","mx-auto",3,"ngClass","click"],[1,"text-lg","font-bold","my-2"],[3,"usingMFA","completed"],[3,"usingMfa","completed"],[3,"usingMfa","QrImage"]],template:function(r,s){if(r&1&&(n(0,"dialog",0)(1,"div",1),v(2,ze,2,0,"h3",2)(3,Re,2,0),n(4,"div",3)(5,"ul",4)(6,"li",5),o(7,"Initialisation"),t(),n(8,"li",6),o(9,"Validation"),t(),n(10,"li",6),o(11,"Finalisation"),t()()(),v(12,Ve,1,1)(13,Ge,1,1)(14,qe,1,2),n(15,"div",7)(16,"form",8)(17,"button",9),h("click",function(){return s.finalizeMFA()}),o(18),t()()()()()),r&2){let f;l(2),E(2,s.usingMfa?3:2),l(6),p("ngClass",N(6,Ce,s.step>=2)),l(2),p("ngClass",N(8,Ce,s.step==3)),l(2),E(12,(f=s.step)===1?12:f===2?13:f===3?14:-1),l(5),p("ngClass",N(10,Ue,s.step===3)),l(),C("",s.step<3?"Annuler":"Fermer"," ")}},dependencies:[O,M,y,j,ge,G,Ee]});let i=e;return i})();var be=(()=>{let e=class e{constructor(a){this.route=a,this.Path=D,this.route.params.subscribe(r=>{this.route.snapshot.data.user&&(this.user=this.route.snapshot.data.user)})}};e.\u0275fac=function(r){return new(r||e)(u(Z))},e.\u0275cmp=c({type:e,selectors:[["app-security-settings"]],decls:36,vars:3,consts:[[1,"bg-white","rounded-lg","shadow","p-6"],[1,"text-xl","font-bold","mb-4"],[1,"flex","justify-between","items-center","mb-3"],[1,"flex","items-center"],[1,"mr-2","text-sm","text-gray-500"],[1,"bi","bi-chevron-right"],["onclick","mfaModal.showModal()"],[3,"usingMfa"]],template:function(r,s){r&1&&(n(0,"div",0)(1,"h2",1),o(2,"Acc\xE8s au compte"),t(),n(3,"ul")(4,"a")(5,"li",2)(6,"span"),o(7,"Addresse e-mail"),t(),n(8,"div",3)(9,"span",4),o(10),t(),m(11,"i",5),t()()(),n(12,"a")(13,"li",2)(14,"span"),o(15,"Numeros de t\xE9l\xE9phone"),t(),m(16,"i",5),t()(),n(17,"a")(18,"li",2)(19,"span"),o(20,"Changer le mot de passe"),t(),m(21,"i",5),t()(),n(22,"a")(23,"li",2)(24,"span"),o(25,"O\xF9 vous vous \xEAtes identifi\xE9"),t(),m(26,"i",5),t()(),n(27,"a",6)(28,"li",2)(29,"span"),o(30,"Verifications en deux \xE9tapes"),t(),n(31,"div",3)(32,"span",4),o(33),t(),m(34,"i",5),t()()()()(),m(35,"app-mfa-modal",7)),r&2&&(l(10),C("",s.user.email," "),l(23),K(s.user.using_mfa?"Activ\xE9e":"D\xE9sactiv\xE9e"),l(2),p("usingMfa",s.user.using_mfa))},dependencies:[Se],styles:["a[_ngcontent-%COMP%]{cursor:pointer}"]});let i=e;return i})();var ye=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=c({type:e,selectors:[["app-notifications-settings"]],decls:34,vars:0,consts:[[1,"bg-white","rounded-lg","shadow","p-6"],[1,"text-xl","font-bold","mb-4"],[1,"flex","justify-between","items-center","mb-3"],[1,"bi","bi-chevron-right"]],template:function(r,s){r&1&&(n(0,"div",0)(1,"h2",1),o(2,"Acc\xE8s au compte"),t(),n(3,"ul")(4,"a")(5,"li",2)(6,"span"),o(7,"Recherche d\u2019un emploi"),t(),m(8,"i",3),t()(),n(9,"a")(10,"li",2)(11,"span"),o(12,"Recruter quelqu\u2019un"),t(),m(13,"i",3),t()(),n(14,"a")(15,"li",2)(16,"span"),o(17,"Connexion avec d\u2019autres personnes"),t(),m(18,"i",3),t()(),n(19,"a")(20,"li",2)(21,"span"),o(22,"Publication et commentaires"),t(),m(23,"i",3),t()(),n(24,"a")(25,"li",2)(26,"span"),o(27,"Messagerie"),t(),m(28,"i",3),t()(),n(29,"a")(30,"li",2)(31,"span"),o(32,"Mise \xE0 jour de votre profil"),t(),m(33,"i",3),t()()()())}});let i=e;return i})();var Be=[{path:"",component:ue,children:[{path:"",redirectTo:"account",pathMatch:"full"},{path:"account",component:xe},{path:"security",component:be},{path:"notifications",component:ye}]}],Me=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=I({type:e}),e.\u0275inj=T({imports:[H.forChild(Be),H]});let i=e;return i})();var Ht=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=I({type:e}),e.\u0275inj=T({providers:[F],imports:[W,de,Me,se,V,G]});let i=e;return i})();export{Ht as PreferencesModule};
