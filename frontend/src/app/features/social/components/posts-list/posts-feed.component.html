<div (scrolled)="onScroll()" [infiniteScrollDistance]="1.5" [infiniteScrollThrottle]="250" infiniteScroll>
  @for (post of posts; track post.post_id) {
    <app-post [postInstance]="post" [isDescriptionExpanded]="isDescriptionExpanded"/>
  }

  @if (isInitialLoading) {
    @for (i of [1, 2]; track i) {
      <ng-container *ngTemplateOutlet="skeleton"/>
    }
  }
  @if (isLoadingMore) {
    <ng-container *ngTemplateOutlet="skeleton"/>
  }
</div>

<ng-template #skeleton>
  <div class="flex w-full flex-col gap-4 my-6">
    <div class="flex items-center gap-4">
      <div class="skeleton h-16 w-16 shrink-0 rounded-full"></div>
      <div class="flex flex-col gap-4">
        <div class="skeleton h-4 w-20"></div>
        <div class="skeleton h-4 w-28"></div>
      </div>
    </div>
    <div class="skeleton h-32 w-full"></div>
  </div>
</ng-template>
