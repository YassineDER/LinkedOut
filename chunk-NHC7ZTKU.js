import{a as se,b as le,c as pe}from"./chunk-76X3TK5R.js";import{a as oe,c as E,d as re,e as S,g as j,h as $,j as b,k as ae,l as z,n as R,o as me,p as V,q as ce}from"./chunk-RF43DT43.js";import"./chunk-3SIP63GW.js";import{a as D,d as de}from"./chunk-DSSSWF5R.js";import{$ as d,Bb as k,C as J,Cb as L,D as _,F as q,Fa as o,Ga as N,Ha as w,I as c,J as T,Ka as C,Ma as A,N as U,O as Q,V as K,Xa as O,Za as P,_ as l,ba as I,d as F,db as W,ea as v,ga as p,hb as X,ka as B,oa as i,pa as t,qa as s,tb as Z,ua as H,ub as ee,wa as u,wb as te,xa as g,xb as ie,yb as Y,zb as ne}from"./chunk-NAGIM7AF.js";var ue=(()=>{let e=class e{constructor(a){this.users=a,this.Path=L}ngOnInit(){this.users.currentUser.subscribe(a=>{a&&(this.user=a)})}onOutletLoaded(a){a.user=this.user}};e.\u0275fac=function(r){return new(r||e)(d(D))},e.\u0275cmp=c({type:e,selectors:[["app-settings"]],decls:21,vars:3,consts:[[1,"gap-0","grid","grid-cols-4","w-full"],[1,"col-span-1","flex","flex-col","w-full","p-4","bg-white","h-screen","shadow"],[1,"text-3xl","font-bold","my-4","ms-3"],[1,"border-gray-200","mb-6"],[1,"menu","space-y-4","text-lg"],[1,"mb-2"],["routerLinkActive","border-l-4",1,"border-primary","rounded-none",3,"routerLink"],[1,"bi","bi-person-fill","me-2"],[1,"bi","bi-lock-fill","me-2"],[1,"bi","bi-bell-fill","me-2"],[1,"col-span-3","flex","flex-col"],[1,"w-4/5","p-8","mx-auto"],[3,"activate"]],template:function(r,m){r&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),o(3,"Pr\xE9ferences"),t(),s(4,"hr",3),i(5,"ul",4)(6,"li",5)(7,"a",6),s(8,"i",7),o(9,"Pr\xE9f\xE9rences du compte"),t()(),i(10,"li",5)(11,"a",6),s(12,"i",8),o(13,"Authentification et S\xE9curit\xE9"),t()(),i(14,"li",5)(15,"a",6),s(16,"i",9),o(17,"Notifications"),t()()()(),i(18,"div",10)(19,"div",11)(20,"router-outlet",12),u("activate",function(M){return m.onOutletLoaded(M)}),t()()()()),r&2&&(l(7),p("routerLink",m.Path.PREFERENCES_ACCOUNT.toString()),l(4),p("routerLink",m.Path.PREFERENCES_SECURITY.toString()),l(4),p("routerLink",m.Path.PREFERENCES_NOTIFICATIONS.toString()))},dependencies:[ee,te,ie]});let n=e;return n})();var he=(()=>{let e=class e{constructor(a){this.fb=a,this.accountForm=this.fb.group({})}submitUserModification(){console.log(this.accountForm.value)}};e.\u0275fac=function(r){return new(r||e)(d(R))},e.\u0275cmp=c({type:e,selectors:[["app-account-infos-modal"]],decls:6,vars:1,consts:[["id","userInfoModal",1,"modal"],[1,"modal-box","w-11/12","max-w-5xl",3,"formGroup","ngSubmit"],[1,"modal-action"],["method","dialog"],[1,"btn"]],template:function(r,m){r&1&&(i(0,"dialog",0)(1,"form",1),u("ngSubmit",function(){return m.submitUserModification()}),i(2,"div",2)(3,"form",3)(4,"button",4),o(5,"Close"),t()()()()()),r&2&&(l(),p("formGroup",m.accountForm))},dependencies:[b,S,j,z]});let n=e;return n})();var xe=(()=>{let e=class e{constructor(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=c({type:e,selectors:[["app-account-settings"]],decls:49,vars:0,consts:[[1,"bg-white","rounded-lg","shadow","p-6"],[1,"text-xl","font-bold","mb-4"],["onclick","userInfoModal.showModal()"],[1,"flex","justify-between","items-center","mb-2"],[1,"bi","bi-chevron-right"],[1,"my-6"],[1,"text-xl","font-bold","mt-6","mb-4"],[1,"flex","items-center"],[1,"mr-2","text-sm","text-gray-500"]],template:function(r,m){r&1&&(i(0,"div",0)(1,"h2",1),o(2,"Informations de profil"),t(),i(3,"ul")(4,"a",2)(5,"li",3)(6,"span"),o(7,"Nom, lieu et secteur"),t(),s(8,"i",4),t()()(),s(9,"hr",5),i(10,"h2",6),o(11,"Pr\xE9f\xE9rences g\xE9n\xE9rales"),t(),i(12,"ul")(13,"a")(14,"li",3)(15,"span"),o(16,"Effets sonores"),t(),i(17,"div",7)(18,"span",8),o(19,"Activ\xE9"),t(),s(20,"i",4),t()()(),i(21,"a")(22,"li",3)(23,"span"),o(24,"Affichage des photos de profil"),t(),i(25,"div",7)(26,"span",8),o(27,"Tous les membres de LinkedIn"),t(),s(28,"i",4),t()()(),i(29,"a")(30,"li",3)(31,"span"),o(32,"Pr\xE9f\xE9rences du fil d'actualit\xE9"),t(),s(33,"i",4),t()(),i(34,"a")(35,"li",3)(36,"span"),o(37,"Personnes que vous ne suivez plus"),t(),s(38,"i",4),t()()(),s(39,"hr",5),i(40,"h2",6),o(41,"Gestion du compte"),t(),i(42,"ul")(43,"a")(44,"li",3)(45,"span"),o(46,"Fermer le compte"),t(),s(47,"i",4),t()()()(),s(48,"app-account-infos-modal"))},dependencies:[he],styles:["a[_ngcontent-%COMP%]{cursor:pointer}"]});let n=e;return n})();var y=(()=>{let e=class e{constructor(a,r){this.http=a,this.users=r}requestMfa(){return new Promise((a,r)=>{this.http.get(this.users.api+"/request-mfa").subscribe({next:m=>a(m),error:m=>r(m)})})}mfa(a,r){return new Promise((m,x)=>{this.http.post(this.users.api+"/mfa/"+a,r).subscribe({next:M=>m(M),error:M=>x(M)})})}};e.\u0275fac=function(r){return new(r||e)(q(X),q(D))},e.\u0275prov=J({token:e,factory:e.\u0275fac});let n=e;return n})();function Ie(n,e){if(n&1&&(i(0,"p",6),o(1),t()),n&2){let f=g();l(),w("Vous pouvez r\xE9essayer dans ",f.timeLeft," secondes.")}}var ge=(()=>{let e=class e{constructor(a,r){this.settings=a,this.utils=r,this.completed=new I,this.isTimerActive=!1,this.timeLeft=60}requestMfa(){return F(this,null,function*(){this.isTimerActive=!0,this.startTimer(),yield this.settings.requestMfa().then(()=>this.completed.emit()).catch(a=>this.utils.alert(a.error.error,ne.ERROR))})}startTimer(){let a=setInterval(()=>{this.timeLeft--,this.timeLeft<=0&&(clearInterval(a),this.isTimerActive=!1,this.timeLeft=60)},1e3)}};e.\u0275fac=function(r){return new(r||e)(d(y),d(k))},e.\u0275cmp=c({type:e,selectors:[["app-step-one"]],outputs:{completed:"completed"},standalone:!0,features:[C],decls:8,vars:3,consts:[[1,"flex","flex-row","items-center","my-2"],[1,"bi","bi-shield-check","text-4xl","text-primary"],[1,"p-4"],[1,"text-center"],[1,"btn","btn-primary","text-lg","mx-auto",3,"disabled","click"],["class","text-center text-gray-500 mt-4",4,"ngIf"],[1,"text-center","text-gray-500","mt-4"]],template:function(r,m){r&1&&(i(0,"div",0),s(1,"i",1),i(2,"p",2),o(3,"Pour activer la v\xE9rification en deux \xE9tapes, vous aurez besoin d'une application d'authentification sur votre t\xE9l\xE9phone. Une fois activ\xE9e, vous devrez entrer un code de v\xE9rification \xE0 chaque connexion. "),t()(),i(4,"div",3)(5,"button",4),u("click",function(){return m.requestMfa()}),o(6),t()(),v(7,Ie,2,1,"p",5)),r&2&&(l(5),p("disabled",m.isTimerActive),l(),w(" ",m.isTimerActive?"Veuillez patienter...":"Continuer"," "),l(),p("ngIf",m.isTimerActive))},dependencies:[P],encapsulation:2});let n=e;return n})();function Ae(n,e){n&1&&(i(0,"p",11),o(1,"Le mot de passe est requis"),t())}var G=(()=>{let e=class e{constructor(a,r,m,x){this.settings=r,this.forms=m,this.utils=x,this.completed=new I,this.codeCtrl=new $("",[E.required,E.minLength(6),E.maxLength(6),E.pattern("^[0-9]*$")]),this.passwordCtrl=new $("",[E.required,E.minLength(8)]),this.OTP_CONFIG=pe,this.mfaForm=a.group({code:this.codeCtrl,password:this.passwordCtrl})}submitMfaAction(){return F(this,null,function*(){this.forms.checkFormValidity(this.mfaForm)&&(yield this.settings.mfa("enable",this.mfaForm.value).then(a=>this.completed.emit(a.qr_image)).catch(a=>this.utils.alert(a.error.error)),this.mfaForm.reset())})}};e.\u0275fac=function(r){return new(r||e)(d(R),d(y),d(ce),d(k))},e.\u0275cmp=c({type:e,selectors:[["app-step-two"]],outputs:{completed:"completed"},standalone:!0,features:[C],decls:20,vars:7,consts:[[3,"formGroup","ngSubmit"],[1,"text-lg","font-semibold","text-gray-800"],[1,"mt-4"],[1,"block","text-sm","mb-2","font-medium","text-gray-700"],[1,"my-4","text-center"],[3,"formCtrl","config"],["type","password","placeholder","Mot de passe LinkedOut",1,"input","input-bordered","w-full",3,"formControl","ngClass"],["class","text-red-500 text-sm mt-1",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"mt-4","text-center","font-bold","text-sm","text-gray-600"],[1,"mt-4","text-center","text-sm","text-gray-600"],[1,"text-red-500","text-sm","mt-1"]],template:function(r,m){r&1&&(i(0,"form",0),u("ngSubmit",function(){return m.submitMfaAction()}),i(1,"h3",1),o(2,"Nous avons envoy\xE9 un code de v\xE9rification \xE0 votre adresse e-mail"),t(),i(3,"div",2)(4,"label",3),o(5,"Saisissez le code de verification \xE0 6 chiffres envoy\xE9:"),t(),i(6,"div",4),s(7,"ng-otp-input",5),t()(),i(8,"div",2)(9,"label",3),o(10,"Saissisez votre mot de passe LinkedOut pour effectuer cette opertation:"),t(),s(11,"input",6),v(12,Ae,2,0,"p",7),t(),i(13,"div",4)(14,"button",8),o(15,"Valider"),t()(),i(16,"p",9),o(17,"Si vous n'avez pas re\xE7u le code, verifiez dans les courriers ind\xE9sirables de votre messagerie."),t(),i(18,"p",10),o(19,"Toujours pas re\xE7u le code ? Fermez cette fen\xEAtre et r\xE9essayez."),t()()),r&2&&(p("formGroup",m.mfaForm),l(7),p("formCtrl",m.codeCtrl)("config",m.OTP_CONFIG),l(4),p("formControl",m.passwordCtrl)("ngClass",(m.passwordCtrl.touched||m.passwordCtrl.dirty)&&m.passwordCtrl.invalid?"input-error":"input-primary"),l(),p("ngIf",m.mfaForm.get("password").invalid&&m.mfaForm.get("password").touched),l(2),p("disabled",!m.mfaForm.valid))},dependencies:[V,b,oe,re,S,ae,z,le,se,P,O],encapsulation:2});let n=e;return n})();var Ee=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=c({type:e,selectors:[["app-step-three"]],inputs:{QrImage:"QrImage"},standalone:!0,features:[C],decls:25,vars:1,consts:[[1,"text-lg","font-semibold","text-gray-800","mb-2"],[1,"flex","items-start","space-x-4"],[1,"list-decimal","pl-5","space-y-2","flex-1"],[1,"text-gray-700"],["href","https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&pcampaignid=web_share","target","_blank",1,"text-primary"],["href","https://apps.apple.com/us/app/google-authenticator/id388497605","target","_blank",1,"text-primary"],[1,"my-4","text-center"],["alt","QR Code",1,"w-60","h-60",3,"src"],[1,"text-warning","text-center","font-bold","text-lg","border","border-warning","rounded-lg","p-2"],[1,"bi","bi-exclamation-triangle","text-warning"],[1,"ms-4"]],template:function(r,m){r&1&&(i(0,"h3",0),o(1,"Configurer une application d'authentification"),t(),i(2,"div",1)(3,"ul",2)(4,"li",3),o(5,"T\xE9l\xE9chargez une application d'authentification. Nous recommandons "),i(6,"a",4),o(7,"Google Authenticator pour Android"),t(),o(8," ou "),i(9,"a",5),o(10,"Google Authenticator pour iOS"),t(),o(11,". "),t(),i(12,"li",3),o(13,`Ouvrez l'application et appuyez sur l'ic\xF4ne "`),i(14,"strong"),o(15,"+"),t(),o(16,'".'),t(),i(17,"li",3),o(18,"Scannez le code QR affich\xE9 ci-dessous."),t()(),i(19,"div",6),s(20,"img",7),t()(),i(21,"p",8),s(22,"i",9),i(23,"span",10),o(24,"Ce code QR est visible une seule fois. Assurez-vous de le scanner avant de continuer."),t()()),r&2&&(l(20),p("src",m.QrImage,K))},encapsulation:2});let n=e;return n})();function ke(n,e){if(n&1){let f=H();i(0,"app-step-one",10),u("completed",function(){U(f);let r=g(2);return Q(r.nextStep())}),t()}}function Le(n,e){if(n&1){let f=H();i(0,"app-step-two",10),u("completed",function(r){U(f);let m=g(2);return Q(m.nextStep(r))}),t()}}function De(n,e){if(n&1&&s(0,"app-step-three",11),n&2){let f=g(2);p("QrImage",f.qrCode)}}var Ce=n=>({"step-primary":n});function je(n,e){if(n&1&&(i(0,"h3",5),o(1,"Prot\xE9gez votre compte LinkedOut avec la v\xE9rification en deux \xE9tapes"),t(),i(2,"div",6)(3,"ul",7)(4,"li",8),o(5,"Informations"),t(),i(6,"li",9),o(7,"Identit\xE9"),t(),i(8,"li",9),o(9,"Finalisation"),t()()(),v(10,ke,1,0)(11,Le,1,0)(12,De,1,1)),n&2){let f=g(),a;l(6),p("ngClass",A(3,Ce,f.step>=2)),l(2),p("ngClass",A(5,Ce,f.step==3)),l(2),B(10,(a=f.step)===1?10:a===2?11:a===3?12:-1)}}function ze(n,e){n&1&&(i(0,"h3",12),s(1,"i",13),i(2,"p",14),o(3,"La v\xE9rification en deux \xE9tapes est activ\xE9e pour votre compte LinkedOut."),t()())}var Re=n=>({"btn-primary":n}),Se=(()=>{let e=class e{constructor(){this.step=1,this.location=location}nextStep(a){a&&(this.qrCode=a),this.step++}finalizeMFA(){this.step===3&&this.location.reload()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=c({type:e,selectors:[["app-mfa-modal"]],inputs:{usingMfa:"usingMfa"},decls:8,vars:5,consts:[["id","mfaModal",1,"modal"],[1,"modal-box","w-11/12","max-w-5xl"],[1,"modal-action"],["method","dialog",1,"text-center","w-full"],[1,"btn","mx-auto",3,"ngClass","click"],[1,"text-lg","font-bold","my-1"],[1,"mx-auto","text-center","my-4"],[1,"steps","steps-horizontal"],[1,"step","step-primary"],[1,"step",3,"ngClass"],[3,"completed"],[3,"QrImage"],[1,"text-center","my-auto"],[1,"bi","bi-shield-check","text-4xl","text-primary"],[1,"py-4"]],template:function(r,m){r&1&&(i(0,"dialog",0)(1,"div",1),v(2,je,13,7)(3,ze,4,0),i(4,"div",2)(5,"form",3)(6,"button",4),u("click",function(){return m.finalizeMFA()}),o(7),t()()()()()),r&2&&(l(2),B(2,m.usingMfa?3:2),l(4),p("ngClass",A(3,Re,m.step===3)),l(),N(m.step<3?"Annuler":"Fermer"))},dependencies:[O,b,S,j,ge,G,Ee]});let n=e;return n})();var be=(()=>{let e=class e{constructor(a){this.route=a,this.Path=L,this.route.params.subscribe(r=>{this.route.snapshot.data.user&&(this.user=this.route.snapshot.data.user)})}};e.\u0275fac=function(r){return new(r||e)(d(Z))},e.\u0275cmp=c({type:e,selectors:[["app-security-settings"]],decls:36,vars:3,consts:[[1,"bg-white","rounded-lg","shadow","p-6"],[1,"text-xl","font-bold","mb-4"],[1,"flex","justify-between","items-center","mb-3"],[1,"flex","items-center"],[1,"mr-2","text-sm","text-gray-500"],[1,"bi","bi-chevron-right"],["onclick","mfaModal.showModal()"],[3,"usingMfa"]],template:function(r,m){r&1&&(i(0,"div",0)(1,"h2",1),o(2,"Acc\xE8s au compte"),t(),i(3,"ul")(4,"a")(5,"li",2)(6,"span"),o(7,"Addresse e-mail"),t(),i(8,"div",3)(9,"span",4),o(10),t(),s(11,"i",5),t()()(),i(12,"a")(13,"li",2)(14,"span"),o(15,"Numeros de t\xE9l\xE9phone"),t(),s(16,"i",5),t()(),i(17,"a")(18,"li",2)(19,"span"),o(20,"Changer le mot de passe"),t(),s(21,"i",5),t()(),i(22,"a")(23,"li",2)(24,"span"),o(25,"O\xF9 vous vous \xEAtes identifi\xE9"),t(),s(26,"i",5),t()(),i(27,"a",6)(28,"li",2)(29,"span"),o(30,"Verifications en deux \xE9tapes"),t(),i(31,"div",3)(32,"span",4),o(33),t(),s(34,"i",5),t()()()()(),s(35,"app-mfa-modal",7)),r&2&&(l(10),w("",m.user.email," "),l(23),N(m.user.using_mfa?"Activ\xE9e":"D\xE9sactiv\xE9e"),l(2),p("usingMfa",m.user.using_mfa))},dependencies:[Se],styles:["a[_ngcontent-%COMP%]{cursor:pointer}"]});let n=e;return n})();var ye=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=c({type:e,selectors:[["app-notifications-settings"]],decls:34,vars:0,consts:[[1,"bg-white","rounded-lg","shadow","p-6"],[1,"text-xl","font-bold","mb-4"],[1,"flex","justify-between","items-center","mb-3"],[1,"bi","bi-chevron-right"]],template:function(r,m){r&1&&(i(0,"div",0)(1,"h2",1),o(2,"Acc\xE8s au compte"),t(),i(3,"ul")(4,"a")(5,"li",2)(6,"span"),o(7,"Recherche d\u2019un emploi"),t(),s(8,"i",3),t()(),i(9,"a")(10,"li",2)(11,"span"),o(12,"Recruter quelqu\u2019un"),t(),s(13,"i",3),t()(),i(14,"a")(15,"li",2)(16,"span"),o(17,"Connexion avec d\u2019autres personnes"),t(),s(18,"i",3),t()(),i(19,"a")(20,"li",2)(21,"span"),o(22,"Publication et commentaires"),t(),s(23,"i",3),t()(),i(24,"a")(25,"li",2)(26,"span"),o(27,"Messagerie"),t(),s(28,"i",3),t()(),i(29,"a")(30,"li",2)(31,"span"),o(32,"Mise \xE0 jour de votre profil"),t(),s(33,"i",3),t()()()())}});let n=e;return n})();var Ge=[{path:"",component:ue,children:[{path:"",redirectTo:"account",pathMatch:"full"},{path:"account",component:xe},{path:"security",component:be},{path:"notifications",component:ye}]}],Me=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=T({type:e}),e.\u0275inj=_({imports:[Y.forChild(Ge),Y]});let n=e;return n})();var Vt=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=T({type:e}),e.\u0275inj=_({providers:[y],imports:[W,de,Me,me,V,G]});let n=e;return n})();export{Vt as PreferencesModule};
