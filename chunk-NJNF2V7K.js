import{a as K,d as B,f as E,h as A,k as L,m as R,o as j,p as z}from"./chunk-YBKQ4PBS.js";import{$ as g,Aa as F,D as C,I,J as w,L as x,N as c,O as u,Oa as v,Pa as M,Va as S,Ya as D,Za as P,_ as N,_a as T,ba as b,db as k,ea as d,ga as f,ja as h,oa as m,pa as y,ua as O,wa as V,xa as p}from"./chunk-KBZJHB7Y.js";function U(i,o){if(i&1){let t=O();m(0,"input",3,4),V("paste",function(n){c(t);let r=p(2);return u(r.handlePaste(n))})("keyup",function(n){let s=c(t).index,a=p(2);return u(a.onKeyUp(n,s))})("input",function(n){c(t);let r=p(2);return u(r.onInput(n))})("keydown",function(n){let s=c(t).index,a=p(2);return u(a.onKeyDown(n,s))}),y()}if(i&2){let t=o.$implicit,e=o.index,n=p(2);h("otp-input ",n.config.inputClass,""),f("pattern",n.config.allowNumbersOnly?"\\d*":"")("type",n.inputType)("placeholder",(n.config==null?null:n.config.placeholder)||"")("ngStyle",n.config.inputStyles)("formControl",n.otpForm.controls[t])("id",n.getBoxId(e))}}function G(i,o){if(i&1&&(m(0,"div",1),d(1,U,2,9,"input",2),v(2,"keys"),y()),i&2){let t=p();h("ng-otp-input-wrapper wrapper ",t.config.containerClass,""),F("id","c_",t.componentKey,""),f("ngStyle",t.config.containerStyles),N(),f("ngForOf",M(2,6,t.otpForm==null?null:t.otpForm.controls))}}var l=class{static ifTab(o){return this.ifKey(o,"Tab")}static ifDelete(o){return this.ifKey(o,"Delete;Del")}static ifBackspace(o){return this.ifKey(o,"Backspace")}static ifRightArrow(o){return this.ifKey(o,"ArrowRight;Right")}static ifLeftArrow(o){return this.ifKey(o,"ArrowLeft;Left")}static ifSpacebar(o){return this.ifKey(o,"Spacebar; ")}static ifKey(o,t){return t.split(";").some(n=>n===o.key)}},_=(()=>{class i{transform(t){return Object.keys(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=x({name:"keys",type:i,pure:!0}),i})(),it=(()=>{class i{constructor(t,e){this.keysPipe=t,this.document=e,this.config={length:4},this.onInputChange=new b,this.inputControls=new Array(this.config.length),this.componentKey=Math.random().toString(36).substring(2)+new Date().getTime().toString(36)}get inputType(){return this.config?.isPasswordInput?"password":this.config?.allowNumbersOnly?"tel":"text"}ngOnInit(){this.otpForm=new E({});for(let t=0;t<this.config.length;t++)this.otpForm.addControl(this.getControlName(t),new A);this.otpForm.valueChanges.subscribe(t=>{this.keysPipe.transform(this.otpForm.controls).forEach(e=>{var n=this.otpForm.controls[e].value;n&&n.length>1&&(n.length>=this.config.length?this.setValue(n):this.rebuildValue())})})}ngAfterViewInit(){if(!this.config.disableAutoFocus){let t=this.document.getElementById(`c_${this.componentKey}`);if(t){let e=t.getElementsByClassName("otp-input")[0];e&&e.focus&&e.focus()}}}getControlName(t){return`ctrl_${t}`}onKeyDown(t,e){let n=this.getBoxId(e-1),r=this.getBoxId(e);if(l.ifSpacebar(t))return t.preventDefault(),!1;if(l.ifBackspace(t)){t.target.value?this.clearInput(r,e):(this.clearInput(n,e-1),this.setSelected(n)),this.rebuildValue();return}}onInput(t){let e=this.currentVal?`${this.currentVal}${t.target.value}`:t.target.value;if(this.config.allowNumbersOnly&&!this.validateNumber(e)){t.target.value="",t.stopPropagation(),t.preventDefault();return}}onKeyUp(t,e){l.ifTab(t)&&(e-=1);let n=this.getBoxId(e+1),r=this.getBoxId(e-1),s=this.getBoxId(e);if(l.ifRightArrow(t)){t.preventDefault(),this.setSelected(n);return}if(l.ifLeftArrow(t)){t.preventDefault(),this.setSelected(r);return}if(l.ifDelete(t)){t.target.value?this.clearInput(s,e):(this.clearInput(r,e-1),this.setSelected(r)),this.rebuildValue();return}t.target.value&&(this.ifValidKeyCode(t)&&this.setSelected(n),this.rebuildValue())}validateNumber(t){return t&&/^[0-9]+$/.test(t)}getBoxId(t){return`otp_${t}_${this.componentKey}`}clearInput(t,e){let n=this.getControlName(e);this.otpForm.controls[n]?.setValue(null);let r=this.document.getElementById(t);r&&r instanceof HTMLInputElement&&(r.value=null)}setSelected(t){this.focusTo(t);let e=this.document.getElementById(t);e&&e.setSelectionRange&&setTimeout(()=>{e.setSelectionRange(0,1)},0)}ifValidKeyCode(t){let e=t.key;return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)||/[a-zA-Z0-9-_]/.test(e)}focusTo(t){let e=this.document.getElementById(t);e&&e.focus()}setValue(t){if(!(this.config.allowNumbersOnly&&isNaN(t))){if(this.otpForm.reset(),!t){this.rebuildValue();return}if(t=t.toString().replace(/\s/g,""),Array.from(t).forEach((n,r)=>{this.otpForm.get(this.getControlName(r))&&this.otpForm.get(this.getControlName(r)).setValue(n)}),!this.config.disableAutoFocus){let n=this.document.getElementById(`c_${this.componentKey}`);var e=t.length<this.config.length?t.length:this.config.length-1;let r=n.getElementsByClassName("otp-input")[e];r&&r.focus&&r.focus()}this.rebuildValue()}}rebuildValue(){let t="";this.keysPipe.transform(this.otpForm.controls).forEach(e=>{if(this.otpForm.controls[e].value){let n=this.otpForm.controls[e].value,r=n.length>1,s=!this.config.allowNumbersOnly&&this.config.letterCase&&(this.config.letterCase.toLocaleLowerCase()=="upper"||this.config.letterCase.toLocaleLowerCase()=="lower");n=n[0];let a=s?this.config.letterCase.toLocaleLowerCase()=="upper"?n.toUpperCase():n.toLowerCase():n;s&&a==n?s=!1:n=a,t+=n,(r||s)&&this.otpForm.controls[e].setValue(n)}}),this.formCtrl?.setValue&&this.formCtrl.setValue(t),this.onInputChange.emit(t),this.currentVal=t}handlePaste(t){let e=t.clipboardData||window.clipboardData;if(e)var n=e.getData("Text");t.stopPropagation(),t.preventDefault(),!(!n||this.config.allowNumbersOnly&&!this.validateNumber(n))&&this.setValue(n)}}return i.\u0275fac=function(t){return new(t||i)(g(_),g(S))},i.\u0275cmp=I({type:i,selectors:[["ng-otp-input"]],inputs:{config:"config",formCtrl:"formCtrl"},outputs:{onInputChange:"onInputChange"},decls:1,vars:1,consts:[[3,"class","id","ngStyle",4,"ngIf"],[3,"id","ngStyle"],["autocomplete","one-time-code",3,"pattern","type","placeholder","ngStyle","class","formControl","id","paste","keyup","input","keydown",4,"ngFor","ngForOf"],["autocomplete","one-time-code",3,"pattern","type","placeholder","ngStyle","formControl","id","paste","keyup","input","keydown"],["inp",""]],template:function(t,e){t&1&&d(0,G,3,8,"div",0),t&2&&f("ngIf",e.otpForm==null?null:e.otpForm.controls)},dependencies:[P,T,D,K,R,B,L,_],styles:[".otp-input[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:4px;border:solid 1px #c5c5c5;text-align:center;font-size:32px}.ng-otp-input-wrapper[_ngcontent-%COMP%]   .otp-input[_ngcontent-%COMP%]:not(:last-child){margin-right:8px}@media screen and (max-width: 767px){.otp-input[_ngcontent-%COMP%]{width:40px;font-size:24px;height:40px}}@media screen and (max-width: 420px){.otp-input[_ngcontent-%COMP%]{width:30px;font-size:18px;height:30px}}"]}),i})(),ot=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=w({type:i}),i.\u0275inj=C({providers:[_],imports:[[k,j,z]]}),i})();var st={allowNumbersOnly:!0,length:6,disableAutoFocus:!1};export{it as a,ot as b,st as c};
