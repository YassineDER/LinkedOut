import{a as xe,c as O,d as ye,e as Ce,g as G,h as Te,i as be,j as Ee,l as Pe,m as _e,n as Ie,o as De}from"./chunk-ZK75M5VO.js";import"./chunk-S2OBTSZA.js";import{a as W,c as Fe}from"./chunk-QFCJGY4B.js";import{a as I,b as Se,c as N}from"./chunk-H5WFD6AQ.js";import{a as D}from"./chunk-XOKX2JYT.js";import{$ as y,A as z,B as E,D as ne,G as x,H as P,I as re,K as se,L as le,M as ae,Pa as ge,R as ce,T as pe,Ta as ve,W as p,X as f,Y as H,Z as de,a as $,b as q,ba as g,d as J,fa as C,ga as me,ha as fe,i as Q,ia as s,ib as L,j as A,ja as a,ka as d,kb as we,l as ee,n as te,na as ue,p as ie,pa as T,qa as v,sa as he,ta as c,ua as _,va as M,w as K,wa as j,x as oe}from"./chunk-GKZ3XEYF.js";function Ye(t,e){if(t&1&&c(0),t&2){let n=v();M(" ",n.user.company_name," ")}}function Be(t,e){if(t&1&&c(0),t&2){let n=v();j(" ",n.user.first_name," ",n.user.last_name," ")}}function Ze(t,e){if(t&1&&c(0),t&2){let n=v();M(" ",n.user.description," ")}}function $e(t,e){if(t&1&&c(0),t&2){let n=v();M(" ",n.user.title," ")}}function qe(t,e){if(t&1&&c(0),t&2){let n=v();M(" ",n.user.title," ")}}var Me=(()=>{let e=class e{constructor(i){this.users=i}};e.\u0275fac=function(o){return new(o||e)(f(D))},e.\u0275cmp=x({type:e,selectors:[["app-profile-overview"]],inputs:{user:"user"},decls:9,vars:3,consts:[[1,"bg-white","p-4","rounded-lg","shadow","text-center"],["alt","Profile","height","80","width","80",1,"rounded-full","mx-auto","mb-4",3,"appSrc"],[1,"text-xl","font-semibold"],[1,"text-sm","text-gray-500"]],template:function(o,r){o&1&&(s(0,"div",0),d(1,"img",1),s(2,"h3",2),y(3,Ye,1,1)(4,Be,1,2),a(),s(5,"p",3),y(6,Ze,1,1)(7,$e,1,1)(8,qe,1,1),a()()),o&2&&(p(),g("appSrc",r.user.imageName),p(2),C(3,r.users.isCompany(r.user)?3:r.users.isJobseeker(r.user)||r.users.isAdmin(r.user)?4:-1),p(3),C(6,r.users.isCompany(r.user)?6:r.users.isJobseeker(r.user)?7:r.users.isAdmin(r.user)?8:-1))},dependencies:[W]});let t=e;return t})();var F=(()=>{let e=class e{constructor(i){this.http=i,this.api=we.hostUrl+"/api/social"}getPosts(i,o,r){return new Promise((l,m)=>this.http.get(this.api+"/posts",{params:{page:i.toString(),size:o.toString(),sort:r}}).subscribe({next:h=>l(h),error:h=>m(h)}))}getPost(i){return new Promise((o,r)=>{this.http.get(this.api+"/posts/"+i).subscribe({next:l=>o(l),error:l=>r(l)})})}createPost(i){return new Promise((o,r)=>{this.http.post(this.api+"/posts",i).subscribe({next:l=>o(l),error:l=>r(l)})})}};e.\u0275fac=function(o){return new(o||e)(ne(ve))},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})();function et(t,e){if(t&1&&d(0,"img",11),t&2){let n=v();g("src",n.imagePreview,ce)}}var je=(()=>{let e=class e{constructor(i,o,r,l){this.utils=i,this.fb=o,this.forms=r,this.posts=l,this.postCreated=new H,this.content=new G("",[O.required,O.minLength(5),O.maxLength(500),O.pattern(/^[a-zA-ZÀ-ÿ0-9\s.,;:!?'"()\-]{5,500}$/)]),this.image=new G(null),this.postForm=this.fb.group({description:this.content,image_b64:this.image})}onImagePicked(i){let u=i.target,S=u.files[0];if(u&&S){let w=new Image;w.src=window.URL.createObjectURL(S),w.onload=()=>{try{let k=S.size/1024,Ge=w.width>2048||w.height>2048||w.width<600||w.height<600,Ve=k>2e3;if(Ge)throw new Error("Les dimensions de l'image doivent \xEAtre comprises entre 600x600 et 2048x2048 pixels");if(Ve)throw new Error("La taille de l'image ne doit pas d\xE9passer 2000 Ko");let U=new FileReader;U.onload=()=>{let R=U.result;this.imagePreview=R,this.postForm.patchValue({image_b64:R.slice(R.indexOf(",")+1)})},U.readAsDataURL(S)}catch(k){this.utils.alert(k.message,I.ERROR)}}}}submitPost(){return J(this,null,function*(){this.forms.checkFormValidity(this.postForm)&&(yield this.posts.createPost(this.postForm.value).then(()=>(this.utils.alert("Post cr\xE9\xE9 avec succ\xE8s",I.SUCCESS),this.utils.playSound(Se.POST),!0)).catch(o=>(this.utils.alert(o.error.error,I.ERROR),!1)))&&(this.postForm.reset(),this.imagePreview=void 0,this.postCreated.emit())})}};e.\u0275fac=function(o){return new(o||e)(f(N),f(Pe),f(De),f(F))},e.\u0275cmp=x({type:e,selectors:[["app-post-form"]],outputs:{postCreated:"postCreated"},decls:12,vars:3,consts:[[1,"bg-white","p-4","rounded-lg","shadow-md","w-full","mb-4",3,"formGroup","ngSubmit"],[1,"font-semibold","mb-2"],[1,"mb-4"],["name","content","placeholder","Quoi de neuf ?",1,"textarea","w-full","mb-3","h-32",3,"formControl"],["class","w-48 h-48 rounded-lg mx-auto my-2 aspect-square","alt","Uploaded Image",3,"src"],[1,"flex","justify-end","space-x-2","text-gray-400"],[1,"flex","btn","btn-ghost","btn-circle","cursor-pointer"],[1,"bi","bi-camera","text-xl"],["accept","image/png, image/jpeg, image/jpg, image/gif","name","image","type","file",1,"hidden",3,"change"],["type","submit",1,"btn","btn-primary","btn-circle"],[1,"bi","bi-send-fill","text-lg"],["alt","Uploaded Image",1,"w-48","h-48","rounded-lg","mx-auto","my-2","aspect-square",3,"src"]],template:function(o,r){o&1&&(s(0,"form",0),T("ngSubmit",function(){return r.submitPost()}),s(1,"h1",1),c(2,"Nouvelle publication"),a(),d(3,"hr",2)(4,"textarea",3),y(5,et,1,1,"img",4),s(6,"div",5)(7,"label",6),d(8,"i",7),s(9,"input",8),T("change",function(m){return r.onImagePicked(m)}),a()(),s(10,"button",9),d(11,"i",10),a()()()),o&2&&(g("formGroup",r.postForm),p(4),g("formControl",r.content),p(),C(5,r.imagePreview?5:-1))},dependencies:[Te,xe,ye,Ce,be,Ee]});let t=e;return t})();function it(t,e,n,i){let o=window&&!!window.document&&window.document.documentElement,r=o&&e?window:n;if(t&&(r=t&&o&&typeof t=="string"?ot(t,n.nativeElement,i):t,!r))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return r}function ot(t,e,n){return(n?window.document:e).querySelector(t)}function V(t){return t&&!t.firstChange}function nt(){return typeof window<"u"}var rt={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},st={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"},X=class{constructor(e=!0){this.vertical=e,this.propsMap=e?rt:st}clientHeightKey(){return this.propsMap.clientHeight}offsetHeightKey(){return this.propsMap.offsetHeight}scrollHeightKey(){return this.propsMap.scrollHeight}pageYOffsetKey(){return this.propsMap.pageYOffset}offsetTopKey(){return this.propsMap.offsetTop}scrollTopKey(){return this.propsMap.scrollTop}topKey(){return this.propsMap.top}};function lt(t,e,n){return!!(t&&e||!n&&e)}function at({windowElement:t,axis:e}){return ct({axis:e,isWindow:pt(t)},t)}function ct(t,e){let n=t.isWindow||e&&!e.nativeElement?e:e.nativeElement;return q($({},t),{container:n})}function pt(t){return["Window","global"].some(n=>Object.prototype.toString.call(t).includes(n))}function Z(t,e){return t?e.document.documentElement:null}function Ne(t,e){let n=ft(e);return e.isWindow?dt(n,t,e):mt(n,t,e)}function dt(t,e,n){let{axis:i,container:o,isWindow:r}=n,{offsetHeightKey:l,clientHeightKey:m}=We(i),h=t+Ue(Z(r,o),i,r),u=ke(e.nativeElement,r,l,m),S=ut(e.nativeElement,i,r)+u;return{height:t,scrolled:h,totalToScroll:S,isWindow:r}}function mt(t,e,n){let{axis:i,container:o}=n,r=o[i.scrollTopKey()],l=o[i.scrollHeightKey()];return{height:t,scrolled:r,totalToScroll:l,isWindow:!1}}function We(t){return{offsetHeightKey:t.offsetHeightKey(),clientHeightKey:t.clientHeightKey()}}function ft({container:t,isWindow:e,axis:n}){let{offsetHeightKey:i,clientHeightKey:o}=We(n);return ke(t,e,i,o)}function ke(t,e,n,i){if(isNaN(t[n])){let o=Z(e,t);return o?o[i]:0}else return t[n]}function ut(t,e,n){let i=e.topKey();if(t.getBoundingClientRect)return t.getBoundingClientRect()[i]+Ue(t,e,n)}function Ue(t,e,n){let i=e.pageYOffsetKey(),o=e.scrollTopKey(),r=e.offsetTopKey();return isNaN(window.pageYOffset)?Z(n,t)[o]:t.ownerDocument?t.ownerDocument.defaultView[i]:t[r]}function ht(t,e={down:0,up:0},n){let i,o;if(t.totalToScroll<=0)return!1;let r=t.isWindow?t.scrolled:t.height+t.scrolled;if(n)i=(t.totalToScroll-r)/t.totalToScroll,o=(e?.down?e.down:0)/10;else{let m=t.scrolled+(t.totalToScroll-r);i=t.scrolled/m,o=(e?.up?e.up:0)/10}return i<=o}function gt(t,e){return t<e.scrolled}function vt(t,e,n){let i=gt(t,e);return{fire:ht(e,n,i),scrollDown:i}}var Y=class{constructor(e){this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},Object.assign(this,e)}updateScrollPosition(e){return this.lastScrollPosition=e}updateTotalToScroll(e){this.lastTotalToScroll!==e&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=e)}updateScroll(e,n){this.updateScrollPosition(e),this.updateTotalToScroll(n)}updateTriggeredFlag(e,n){n?this.triggered.down=e:this.triggered.up=e}isTriggeredScroll(e,n){return n?this.triggered.down===e:this.triggered.up===e}};function St(t){let{scrollContainer:e,scrollWindow:n,element:i,fromRoot:o}=t,r=at({axis:new X(!t.horizontal),windowElement:it(e,n,i,o)}),l=new Y({totalToScroll:Ne(i,r).totalToScroll}),m={container:r.container,throttle:t.throttle},h={up:t.upDistance,down:t.downDistance};return wt(m).pipe(ee(()=>Q(Ne(i,r))),A(u=>xt(l.lastScrollPosition,u,h)),K(({stats:u})=>l.updateScroll(u.scrolled,u.totalToScroll)),ie(({fire:u,scrollDown:S,stats:{totalToScroll:w}})=>lt(t.alwaysCallback,u,l.isTriggeredScroll(w,S))),K(({scrollDown:u,stats:{totalToScroll:S}})=>{l.updateTriggeredFlag(S,u)}),A(yt))}function wt(t){let e=te(t.container,"scroll");return t.throttle&&(e=e.pipe(oe(t.throttle,void 0,{leading:!0,trailing:!0}))),e}function xt(t,e,n){let{scrollDown:i,fire:o}=vt(t,e,n);return{scrollDown:i,fire:o,stats:e}}var B={DOWN:"[NGX_ISE] DOWN",UP:"[NGX_ISE] UP"};function yt(t){let{scrollDown:e,stats:{scrolled:n}}=t;return{type:e?B.DOWN:B.UP,payload:{currentScrollPosition:n}}}var Re=(()=>{let e=class e{constructor(i,o){this.element=i,this.zone=o,this.scrolled=new H,this.scrolledUp=new H,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}ngAfterViewInit(){this.infiniteScrollDisabled||this.setup()}ngOnChanges({infiniteScrollContainer:i,infiniteScrollDisabled:o,infiniteScrollDistance:r}){let l=V(i),m=V(o),h=V(r),u=!m&&!this.infiniteScrollDisabled||m&&!o.currentValue||h;(l||m||h)&&(this.destroyScroller(),u&&this.setup())}setup(){nt()&&this.zone.runOutsideAngular(()=>{this.disposeScroller=St({fromRoot:this.fromRoot,alwaysCallback:this.alwaysCallback,disable:this.infiniteScrollDisabled,downDistance:this.infiniteScrollDistance,element:this.element,horizontal:this.horizontal,scrollContainer:this.infiniteScrollContainer,scrollWindow:this.scrollWindow,throttle:this.infiniteScrollThrottle,upDistance:this.infiniteScrollUpDistance}).subscribe(i=>this.handleOnScroll(i))})}handleOnScroll({type:i,payload:o}){let r=i===B.DOWN?this.scrolled:this.scrolledUp;Ct(r)&&this.zone.run(()=>r.emit(o))}ngOnDestroy(){this.destroyScroller()}destroyScroller(){this.disposeScroller&&this.disposeScroller.unsubscribe()}};e.\u0275fac=function(o){return new(o||e)(f(pe),f(de))},e.\u0275dir=re({type:e,selectors:[["","infiniteScroll",""],["","infinite-scroll",""],["","data-infinite-scroll",""]],inputs:{infiniteScrollDistance:"infiniteScrollDistance",infiniteScrollUpDistance:"infiniteScrollUpDistance",infiniteScrollThrottle:"infiniteScrollThrottle",infiniteScrollDisabled:"infiniteScrollDisabled",infiniteScrollContainer:"infiniteScrollContainer",scrollWindow:"scrollWindow",immediateCheck:"immediateCheck",horizontal:"horizontal",alwaysCallback:"alwaysCallback",fromRoot:"fromRoot"},outputs:{scrolled:"scrolled",scrolledUp:"scrolledUp"},features:[se]});let t=e;return t})();function Ct(t){return t.observed??t.observers.length>0}var Ae=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=P({type:e}),e.\u0275inj=E({});let t=e;return t})();var bt=(t,e)=>e.post_id;function Et(t,e){if(t&1&&(s(0,"h3",14),c(1),a(),s(2,"span",5),c(3),a()),t&2){let n=v().$implicit;p(),j("",n.profile.user.first_name," ",n.profile.user.last_name,""),p(2),_(n.profile.user.title)}}function Pt(t,e){if(t&1&&(s(0,"h3",14),c(1),a(),s(2,"span",5),c(3),a()),t&2){let n=v().$implicit;p(),_(n.profile.user.company_name),p(2),_(n.profile.user.sector)}}function _t(t,e){t&1&&(s(0,"div",15)(1,"div",16),d(2,"div",17),s(3,"div",18),d(4,"div",19)(5,"div",20),a()(),d(6,"div",21),a())}function It(t,e){if(t&1&&(s(0,"div",1)(1,"div",2),d(2,"img",3),s(3,"div",4),y(4,Et,4,3)(5,Pt,4,2),s(6,"p",5),c(7),a(),s(8,"p",6),c(9),a(),s(10,"div",7),d(11,"img",8),a()()(),s(12,"div",9)(13,"div",10)(14,"span",11),d(15,"i",12),a(),s(16,"span",11),c(17,"Commenter"),a(),s(18,"span",11),c(19,"Envoyer"),a()()()(),y(20,_t,7,0,"div",13)),t&2){let n=e.$implicit,i=v();p(2),g("appSrc",n.profile.user.imageName),p(2),C(4,i.users.isJobseeker(n.profile.user)||i.users.isAdmin(n.profile.user)?4:i.users.isCompany(n.profile.user)?5:-1),p(3),_(i.utils.formatDate(n.created,!0)),p(2),_(n.description),p(2),g("appSrc",n.imageName),p(9),C(20,i.isLoading?20:-1)}}var Ke=(()=>{let e=class e{constructor(i,o,r){this.postsService=i,this.utils=o,this.users=r,this.posts=[],this.current_page=0,this.size=10,this.isLoading=!1,this.loadPosts()}loadPosts(){this.isLoading=!0,this.postsService.getPosts(this.current_page,this.size,"created,desc").then(i=>{this.posts=this.posts.concat(i.content),this.current_page++,this.isLoading=!1}).catch(i=>{this.utils.alert("Error loading posts",I.ERROR),this.isLoading=!1})}onScroll(){this.isLoading||this.loadPosts()}onPostCreated(){this.posts=[],this.current_page=0,this.loadPosts()}};e.\u0275fac=function(o){return new(o||e)(f(F),f(N),f(D))},e.\u0275cmp=x({type:e,selectors:[["app-posts-feed"]],decls:3,vars:2,consts:[["infiniteScroll","",3,"infiniteScrollDistance","infiniteScrollThrottle","scrolled"],[1,"bg-white","p-4","rounded-lg","shadow","mb-2"],[1,"flex","items-start","mb-2"],["alt","Profile",1,"w-12","h-12","rounded-full","mr-4",3,"appSrc"],[1,"w-full"],[1,"text-sm","text-gray-500","leading-none"],[1,"my-4"],[1,"relative","my-2"],["alt","Post image","loading","lazy",1,"h-96","mx-auto","object-cover",3,"appSrc"],[1,"mt-4","flex","justify-between","text-gray-600","text-sm"],[1,"flex","space-x-2"],[1,"cursor-pointer"],[1,"bi","bi-hand-thumbs-up-fill"],["class","flex w-full flex-col gap-4"],[1,"text-lg","font-semibold"],[1,"flex","w-full","flex-col","gap-4"],[1,"flex","items-center","gap-4"],[1,"skeleton","h-16","w-16","shrink-0","rounded-full"],[1,"flex","flex-col","gap-4"],[1,"skeleton","h-4","w-20"],[1,"skeleton","h-4","w-28"],[1,"skeleton","h-32","w-full"]],template:function(o,r){o&1&&(s(0,"div",0),T("scrolled",function(){return r.onScroll()}),me(1,It,21,6,null,null,bt),a()),o&2&&(g("infiniteScrollDistance",5)("infiniteScrollThrottle",50),p(),fe(r.posts))},dependencies:[W,Re]});let t=e;return t})();var ze=(()=>{let e=class e{constructor(i){this.users=i}ngOnInit(){this.users.currentUser.subscribe(i=>{i&&(this.user=i)})}};e.\u0275fac=function(o){return new(o||e)(f(D))},e.\u0275cmp=x({type:e,selectors:[["app-feed"]],decls:29,vars:1,consts:[[1,"mx-auto","p-4","flex","gap-6","w-5/6"],[1,"w-3/4"],[3,"postCreated"],["postsFeed",""],[1,"w-1/4","space-y-2"],[3,"user"],[1,"mx-auto","rounded-lg","overflow-hidden","sticky","top-0","pt-2","text-center"],["alt","See who's hiring on LinkedIn","src","https://ax0judwwk3y8.objectstorage.eu-paris-1.oci.customer-oci.com/n/ax0judwwk3y8/b/static/o/ad-example.jpg",1,"w-full","h-full","object-cover"],[1,"text-gray-600","text-sm","my-4"],[1,"py-2","border-t"],[1,"text-sm","text-gray-500","grid","grid-cols-2","gap-1"],["href","#",1,"hover:underline"],[1,"px-4","py-2","border-t","flex","items-center","justify-center","space-x-2"],["src","favicon.ico","alt","LinkedOut",1,"w-6","h-6","inline-block"]],template:function(o,r){if(o&1){let l=ue();s(0,"div",0)(1,"div",1)(2,"app-post-form",2),T("postCreated",function(){le(l);let h=he(4);return ae(h.onPostCreated())}),a(),d(3,"app-posts-feed",null,3),a(),s(5,"div",4),d(6,"app-profile-overview",5),s(7,"div",6),d(8,"img",7),s(9,"h5",8),c(10,"Accessibilit\xE9 : partiellement conforme"),a(),s(11,"div",9)(12,"ul",10)(13,"li")(14,"a",11),c(15,"Accessibilit\xE9"),a()(),s(16,"li")(17,"a",11),c(18,"Confidentialit\xE9"),a()(),s(19,"li")(20,"a",11),c(21,"Publicit\xE9"),a()(),s(22,"li")(23,"a",11),c(24,"Conditions g\xE9n\xE9rales"),a()()()(),s(25,"div",12),d(26,"img",13),s(27,"p"),c(28,"LinkedOut \xA9 2024"),a()()()()()}o&2&&(p(6),g("user",r.user))},dependencies:[Me,je,Ke]});let t=e;return t})();var Ft=[{path:"",children:[{path:"",redirectTo:"feed",pathMatch:"full"},{path:"feed",component:ze,title:"Fil d'actualit\xE9 - LinkedOut"}]}],Le=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=P({type:e}),e.\u0275inj=E({imports:[L.forChild(Ft),L]});let t=e;return t})();var vi=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=P({type:e}),e.\u0275inj=E({providers:[F],imports:[ge,Le,_e,Ie,Fe,Ae]});let t=e;return t})();export{vi as SocialModule};
